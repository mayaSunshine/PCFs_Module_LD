{"version":3,"sources":["../src/utilities/scatterpolar-utils.tsx"],"sourcesContent":["import * as React from 'react';\nimport { ScaleLinear } from 'd3-scale';\nimport { JSXElement } from '@fluentui/react-utilities';\n\n/**\n * Helper to render categorical labels for scatterpolar charts with improved overlap logic across all series\n * Now places labels at equal angles for all unique texts, regardless of data positions.\n */\nexport function renderScatterPolarCategoryLabels({\n  xAxisScale,\n  yAxisScale,\n  className,\n  lineOptions,\n  minPixelGap = 40,\n}: {\n  xAxisScale: ScaleLinear<number, number>;\n  yAxisScale: ScaleLinear<number, number>;\n  className: string;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  lineOptions?: any;\n  minPixelGap?: number;\n}): JSXElement[] {\n  const maybeLineOptions = extractMaybeLineOptions(lineOptions);\n\n  // Always use axisLabel from lineOptions to display the labels\n  const uniqueTexts: string[] = maybeLineOptions?.axisLabel ?? [];\n\n  // Place labels at equal angles\n  const renderedLabels: JSXElement[] = [];\n  const placedPositions: { x: number; y: number }[] = [];\n  const labelRadius = 0.7; // You can adjust this value for more/less offset\n  const numLabels = uniqueTexts.length;\n\n  // Respect schema or prop rotation and direction (default ccw, 0Â°)\n  const dirMultiplier = maybeLineOptions?.direction === 'clockwise' ? -1 : 1;\n  const rotationRad = ((maybeLineOptions?.rotation ?? 0) * Math.PI) / 180;\n\n  uniqueTexts.forEach((text, i) => {\n    const angle = rotationRad + dirMultiplier * ((2 * Math.PI) / numLabels) * i;\n    const originXOffset = maybeLineOptions?.originXOffset || 0;\n    const x = xAxisScale(labelRadius * Math.cos(angle) - originXOffset / 2);\n    const y = yAxisScale(labelRadius * Math.sin(angle));\n\n    // Check distance from all previously placed labels\n    const isFarEnough = placedPositions.every(pos => Math.sqrt((x - pos.x) ** 2 + (y - pos.y) ** 2) >= minPixelGap);\n\n    if (renderedLabels.length === 0 || isFarEnough) {\n      renderedLabels.push(\n        <text\n          key={`scatterpolar-label-${text}`}\n          x={x}\n          y={y}\n          className={className}\n          textAnchor=\"middle\"\n          alignmentBaseline=\"middle\"\n          opacity={1}\n        >\n          {text}\n        </text>,\n      );\n      placedPositions.push({ x, y });\n    }\n  });\n\n  return renderedLabels;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function extractMaybeLineOptions(lineOptions: any):\n  | {\n      originXOffset?: number;\n      direction?: 'clockwise' | 'counterclockwise';\n      rotation?: number;\n      axisLabel?: string[];\n    }\n  | undefined {\n  return lineOptions\n    ? {\n        originXOffset: lineOptions.originXOffset,\n        direction:\n          lineOptions.direction === 'clockwise' || lineOptions.direction === 'counterclockwise'\n            ? lineOptions.direction\n            : undefined,\n        rotation: lineOptions.rotation,\n        axisLabel: Array.isArray(lineOptions.axisLabel) ? lineOptions.axisLabel : undefined,\n      }\n    : undefined;\n}\n"],"names":["React","renderScatterPolarCategoryLabels","xAxisScale","yAxisScale","className","lineOptions","minPixelGap","maybeLineOptions","extractMaybeLineOptions","uniqueTexts","axisLabel","renderedLabels","placedPositions","labelRadius","numLabels","length","dirMultiplier","direction","rotationRad","rotation","Math","PI","forEach","text","i","angle","originXOffset","x","cos","y","sin","isFarEnough","every","pos","sqrt","push","key","textAnchor","alignmentBaseline","opacity","undefined","Array","isArray"],"mappings":";;;;;;;;;;;2BAoEgBQ;eAAAA;;IA5DAP,gCAAAA;;;;;iEARO,QAAQ;AAQxB,0CAA0C,EAC/CC,UAAU,EACVC,UAAU,EACVC,SAAS,EACTC,WAAW,EACXC,cAAc,EAAE,EAQjB;IACC,MAAMC,mBAAmBC,wBAAwBH;QAGnBE;IAD9B,8DAA8D;IAC9D,MAAME,cAAwBF,CAAAA,8BAAAA,qBAAAA,QAAAA,qBAAAA,KAAAA,IAAAA,KAAAA,IAAAA,iBAAkBG,SAAAA,AAAS,MAAA,QAA3BH,gCAAAA,KAAAA,IAAAA,8BAA+B,EAAE;IAE/D,+BAA+B;IAC/B,MAAMI,iBAA+B,EAAE;IACvC,MAAMC,kBAA8C,EAAE;IACtD,MAAMC,cAAc,KAAK,iDAAiD;IAC1E,MAAMC,YAAYL,YAAYM,MAAM;IAEpC,kEAAkE;IAClE,MAAMC,gBAAgBT,CAAAA,qBAAAA,QAAAA,qBAAAA,KAAAA,IAAAA,KAAAA,IAAAA,iBAAkBU,SAAAA,AAAS,MAAK,cAAc,CAAC,IAAI;QACnDV;IAAtB,MAAMW,cAAgBX,CAAAA,CAAAA,6BAAAA,qBAAAA,QAAAA,qBAAAA,KAAAA,IAAAA,KAAAA,IAAAA,iBAAkBY,QAAAA,AAAQ,MAAA,QAA1BZ,+BAAAA,KAAAA,IAAAA,8BAA8B,CAAA,GAAKa,KAAKC,EAAE,GAAI;IAEpEZ,YAAYa,OAAO,CAAC,CAACC,MAAMC;QACzB,MAAMC,QAAQP,cAAcF,gBAAiB,CAAC,IAAII,KAAKC,EAAE,GAAIP,SAAAA,CAAQ,GAAKU;QAC1E,MAAME,gBAAgBnB,CAAAA,qBAAAA,QAAAA,qBAAAA,KAAAA,IAAAA,KAAAA,IAAAA,iBAAkBmB,aAAAA,AAAa,KAAI;QACzD,MAAMC,IAAIzB,WAAWW,cAAcO,KAAKQ,GAAG,CAACH,SAASC,gBAAgB;QACrE,MAAMG,IAAI1B,WAAWU,cAAcO,KAAKU,GAAG,CAACL;QAE5C,mDAAmD;QACnD,MAAMM,cAAcnB,gBAAgBoB,KAAK,CAACC,CAAAA,MAAOb,KAAKc,IAAI,CAAEP,CAAAA,IAAIM,KAAIN,KAAM,IAAKE,CAAAA,IAAII,KAAIJ,KAAM,MAAMvB;QAEnG,IAAIK,eAAeI,MAAM,KAAK,KAAKgB,aAAa;YAC9CpB,eAAewB,IAAI,CAAA,WAAA,GACjB,OAAA,aAAA,CAACZ,QAAAA;gBACCa,KAAK,CAAC,mBAAmB,EAAEb,MAAM;gBACjCI,GAAGA;gBACHE,GAAGA;gBACHzB,WAAWA;gBACXiC,YAAW;gBACXC,mBAAkB;gBAClBC,SAAS;eAERhB;YAGLX,gBAAgBuB,IAAI,CAAC;gBAAER;gBAAGE;YAAE;QAC9B;IACF;IAEA,OAAOlB;AACT;AAGO,iCAAiCN,WAAgB;IAQtD,OAAOA,cACH;QACEqB,eAAerB,YAAYqB,aAAa;QACxCT,WACEZ,YAAYY,SAAS,KAAK,eAAeZ,YAAYY,SAAS,KAAK,qBAC/DZ,YAAYY,SAAS,GACrBuB;QACNrB,UAAUd,YAAYc,QAAQ;QAC9BT,WAAW+B,MAAMC,OAAO,CAACrC,YAAYK,SAAS,IAAIL,YAAYK,SAAS,GAAG8B;IAC5E,IACAA;AACN"}